---
title: "MetricDefine Examples"
format: html
execute:
  echo: true
  warning: false
---

# MetricDefine Guide

This document demonstrates how to use `MetricDefine` for defining and examining metrics.

## Setup

```{python}
import sys
sys.path.append('../src')

from polars_eval_metrics.core.metric_define import MetricDefine, MetricType, SharedType
from polars_eval_metrics.core.builtin import BUILTIN_METRICS, BUILTIN_SELECTORS
```

## Creating MetricDefine

### Basic Built-in Metrics

There are built-in metrics to set up metrics. 

```{python}
# List all available built-in metrics
for name, expr in sorted(BUILTIN_METRICS.items()):
    print(f"{name}: {expr}")
```

```{python}
# Simple MAE metric with automatic label
MetricDefine(name="mae", type=MetricType.ACROSS_SAMPLES)
```

### Built-in Metrics with Selectors

There are also built-in selectors that allow hirachical 
structure. 

```{python}
# List all available built-in selectors
for name, expr in sorted(BUILTIN_SELECTORS.items()):
    print(f"{name}: {expr}")
```

Using `:` to set <agg_expr:selector_expr> if it is built-in.

```{python}
# MAE with mean selector for two-level aggregation
MetricDefine(name="mae:mean", type=MetricType.ACROSS_SUBJECT)
```