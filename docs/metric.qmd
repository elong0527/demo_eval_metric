---
title: "MetricData Examples"
format: html
execute:
  echo: true
  warning: false
---

# MetricData Guide

This document demonstrates how to use `MetricData` for defining and examining metrics.

## Setup

```{python}
import sys
sys.path.append('../src')

from polars_eval_metrics.core.metric_data import MetricData, MetricType, SharedType
from polars_eval_metrics.core.metric_compiler import MetricCompiler
```

## Creating MetricData

### Basic Built-in Metrics

There are built-in metrics to set up metrics. 

```{python}
# List all available built-in metrics
compiler = MetricCompiler()
for name, expr in sorted(compiler.BUILTIN_METRICS.items()):
    print(f"{name}: {expr}")
```

```{python}
# Simple MAE metric with automatic label
MetricData(name="mae", type=MetricType.ACROSS_SAMPLES)
```

### Built-in Metrics with Selectors

There are also built-in selectors that allow hirachical 
structure. 

```{python}
# List all available built-in metrics
compiler = MetricCompiler()
for name, expr in sorted(compiler.BUILTIN_SELECTORS.items()):
    print(f"{name}: {expr}")
```

Using `:` to set <agg_expr:selector_expr> if it is built-in.

```{python}
# MAE with mean selector for two-level aggregation
MetricData(name="mae:mean", type=MetricType.ACROSS_SUBJECT)
```